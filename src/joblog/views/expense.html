{{define "expense"}}
<!DOCTYPE html>
<html lang="en">

	<head>
		<title>Page Title</title>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>My Project</title>
		<link rel="stylesheet" href="../Styles.css">
		    <!--<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">-->
		<!--<script src="https://cdn.tailwindcss.com"></script>-->
		  <svg width="0" height="0" class="hidden" style="display: none;">
  <symbol id="option" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
    <circle cx="12" cy="12" r="2"></circle>
    <circle cx="4" cy="12" r="2"></circle>
    <circle cx="20" cy="12" r="2"></circle>
  </symbol>
</svg>

	</head>

	<body style="margin: 0px;" class="">

		<div id="expense-grid-container">
			<div id="brand">
				<h1>
				Bookie
				</h1>
			</div>


			<header>
				{{template "path" .}}

			</header>
			<aside id="side-bar">
				<ul>
					<li class="side-item">
						Home
					</li>

					<li class="side-item">
						dashboard
					</li>

					<li class="side-item">
						View Documents	
					</li>
					<li class="side-item">
						Invoice
					</li>
					<li class="side-item">
						Notes
					</li>
				</ul>
			</aside>
			{{template "job-info" .}}
			<main id="expense-main">

				<div id="item-header">

					<h2> 
						{{.Expense.Name}}

					</h2>
					<div id="item-cost">
						<span> $ {{.Expense.Cost}} </span>
					</div>
				<div id="item-description">
					{{if eq .Expense.Description "no description"}}
					<button> Add Description </button>
					{{else}}
					{{.Expense.Description}}
					{{end}}
				</div>


				</div>
				

				<div id="item-details">
					<div id="expDocList">
				<hr/>

						<h4> 
							Receipt
						</h4>
						<ul>
							{{range $expense, $receipt := .ReceiptMap}}
							<!--<div class="receipt-itemized">-->
							<!--<li>-->
							<!--		{{$receipt.FileKey}}-->
							<!--</li>-->
							<!--	<button> Download/View </button>-->
							<!--</div>-->
				{{if eq $receipt.Id 0}}
							<div class="receipt-itemized">
				<li id={{print "receiptfor" $expense.Id}}>
					<!--<form enctype="multipart/form-data" method="post" hx-target={{print "#receiptfor" $expense.Id}} hx-swap="outerHTML" hx-trigger="submit" hx-post={{print "/upload/receipt/" $expense.Id}}>-->
					<!---->
					<!--			<input type="file" name="file">-->
					<!--	<input type="hidden" name="expId" value={{$expense.Id}} >-->
					<!--	<input type="submit">-->
					<!---->
					<!--</form>-->
					<form enctype="multipart/form-data" method="post" hx-target={{print "#receiptfor" $expense.Id}} hx-swap="outerHTML" hx-trigger="submit" hx-post={{print "/upload/receipt/" $expense.Id}}>

						<label for="file" id="receipt-upload-btn">  Upload

						</label>
								<input id="file" type="file" name="file" accept=".pdf"> 

						<input type="hidden" name="expId" value={{$expense.Id}} >
						<button id="receipt-submit-btn" type="submit"> Submit </button>
						
					</form>
							</li>
							</div>

				{{else}}
							<div class="receipt-itemized">

							<li class="upload-rec-row">
									<div id="filekey">
									{{$receipt.FileKey}}
									</div>
									<a href={{$receipt.S3Url}}><button> Dowload/view </button></a>
							</li>
							</div>

				{{end}}

							{{end}}
						</ul>
					<!--<div id="expDescOpts">-->
					<!--	<button id="item-edit-modal-btn"> Make Changes </button>-->
					<!--	<button> Remove Item </button>-->
					<!--</div>-->
					</div>
					

				</div>

				<dialog id="item-edit-modal">
					<div>
						<form id="item-edit-form" method="post" action={{print "edit/" .Expense.Id}} >
							<div>
							<label for="exp-name"> Name </label>
								<input type="text" name="exp-name" value={{.Expense.Name}}>
							</div>
							<div>
							<label for="exp-cost"> Cost/Value </label>
								<input type="text" name="exp-cost" value={{.Expense.Cost}}>
							</div>
							<div class="modal-btn-group">
								<button id="item-edit-btn" type="submit"> Make Changes </button>
								<button id="item-edit-modal-close"> Cancel </button>
							</div>
						</form>
					</div>
				</dialog>

					

			</main>
		</div>




		<script src="../expense.js"></script>

	</body>

</html>
{{end}}
